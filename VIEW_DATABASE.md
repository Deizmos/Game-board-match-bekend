# –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö game_board_match

## üìç –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `game_board_match` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**:
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä**: `game-board-match-db`
- **–û–±—Ä–∞–∑**: `postgres:16-alpine`
- **–î–∞–Ω–Ω—ã–µ**: Docker volume `game-board-match-bekend_postgres_data`
- **–§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/var/lib/docker/volumes/game-board-match-bekend_postgres_data/_data`

## üîç –°–ø–æ—Å–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –°–ø–æ—Å–æ–± 1: Prisma Studio (–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π) ‚≠ê

–í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

```bash
npm run prisma:studio
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä –Ω–∞ `http://localhost:5555` —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü.

### –°–ø–æ—Å–æ–± 2: psql —á–µ—Ä–µ–∑ Docker (–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é:

```bash
docker exec -it game-board-match-db psql -U postgres -d game_board_match
```

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å SQL –∫–æ–º–∞–Ω–¥—ã:
```sql
-- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
\dt

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT * FROM users;

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–≥—Ä—ã
SELECT * FROM games;

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏–≥—Ä–∞–º–∏
SELECT * FROM user_games;

-- –í—ã–π—Ç–∏
\q
```

### –°–ø–æ—Å–æ–± 3: –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ psql (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ)

```bash
psql -h localhost -U postgres -d game_board_match
```

–ü–∞—Ä–æ–ª—å: `postgres`

### –°–ø–æ—Å–æ–± 4: –ß–µ—Ä–µ–∑ API

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API endpoints –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl http://localhost:3000/api/users

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∏–≥—Ä—ã
curl http://localhost:3000/api/games

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
curl http://localhost:3000/api/users/1
```

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–¢–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `profiles` - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `games` - –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã
- `user_games` - —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏–≥—Ä–∞–º–∏
- `matches` - –º–∞—Ç—á–∏/–≤—Å—Ç—Ä–µ—á–∏
- `likes` - —Å–∏–º–ø–∞—Ç–∏–∏
- `messages` - —Å–æ–æ–±—â–µ–Ω–∏—è

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ PostgreSQL
docker-compose logs postgres

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
npm run db:stop

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
npm run db:up

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ volume)
npm run db:down
```

## üìä –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT COUNT(*) FROM users;

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –∏—Ö –∏–≥—Ä–∞–º–∏
SELECT u.name, u.email, g.name as game_name, ug.skill_level
FROM users u
JOIN user_games ug ON u.id = ug."userId"
JOIN games g ON ug."gameId" = g.id;

-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–≥—Ä—ã
SELECT g.name, COUNT(ug."userId") as users_count
FROM games g
LEFT JOIN user_games ug ON g.id = ug."gameId"
GROUP BY g.id, g.name
ORDER BY users_count DESC;
```

